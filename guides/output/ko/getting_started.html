<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>레일스 시작하기 — Ruby on Rails Guides</title>
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />

<link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body class="guide">
  <div>
    <img src="images/edge_badge.png" alt="edge-badge" id="edge-badge" />
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="http://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://rubyonrails.org/">개요</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/download">다운로드</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/deploy">배포</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">코드</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/screencasts">스크린캐스트</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/documentation">도큐먼트</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/ecosystem">생태계</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/community">커뮤니티</a></li>
        <li class="more-info"><a href="http://weblog.rubyonrails.org/">블로그</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">홈</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu" class="guides-index-item nav-item">가이드 인덱스</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Start Here</dt>
                <dd><a href="getting_started.html">Getting Started with Rails</a></dd>
                <dt>Models</dt>
                <dd><a href="active_record_basics.html">Active Record Basics</a></dd>
                <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                <dd><a href="association_basics.html">Active Record Associations</a></dd>
                <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                <dt>Views</dt>
                <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                <dt>Controllers</dt>
                <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
              </dl>
              <dl class="R">
                <dt>Digging Deeper</dt>
                <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                <dd><a href="i18n.html">Rails Internationalization API</a></dd>
                <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                <dd><a href="security.html">Securing Rails Applications</a></dd>
                <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                <dd><a href="command_line.html">Rails Command Line Tools and Rake Tasks</a></dd>
                <dd><a href="asset_pipeline.html">Asset Pipeline</a></dd>
                <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                <dt>Extending Rails</dt>
                <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                <dd><a href="generators.html">Creating and Customizing Rails Generators</a></dd>
                <dt>Contributing to Ruby on Rails</dt>
                <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                <dd><a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                <dt>Maintenance Policy</dt>
                <dd><a href="maintenance_policy.html">Maintenance Policy</a></dd>
                <dt>Release Notes</dt>
                <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                <dd><a href="4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</a></dd>
                <dd><a href="4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</a></dd>
                <dd><a href="4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</a></dd>
                <dd><a href="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</a></dd>
                <dd><a href="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</a></dd>
                <dd><a href="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</a></dd>
                <dd><a href="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</a></dd>
                <dd><a href="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">기여하기</a></li>
        <li><a class="nav-item" href="credits.html">크레딧</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">가이드 인덱스</option>
              <optgroup label="Start Here">
                  <option value="getting_started.html">Getting Started with Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Digging Deeper">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="i18n.html">Rails Internationalization API</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">Rails Command Line Tools and Rake Tasks</option>
                  <option value="asset_pipeline.html">Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
              </optgroup>
              <optgroup label="Extending Rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators</option>
              </optgroup>
              <optgroup label="Contributing to Ruby on Rails">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Maintenance Policy">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</option>
                  <option value="4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</option>
                  <option value="4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</option>
                  <option value="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</option>
                  <option value="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</option>
                  <option value="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</option>
                  <option value="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</option>
                  <option value="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</option>
              </optgroup>
          </select>
        </li>
      </ul>
      </div>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>레일스 시작하기</h2><p>이 가이드는 루비온레일스를 시작 그리고 실행까지 다룹니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">This guide covers getting up and running with Ruby on Rails.</p><p>이 가이드를 읽고나면 아래사항을 알게 될 것입니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">After reading this guide, you will know:</p>
<ul>
<li><p>레일스를 설치, 새 레일스 어플리케이션을 만들고 데이터베이스에 연결하는 법. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">How to install Rails, create a new Rails application, and connect your application to a database.</p></li>
<li><p>일반적이 레일스 어필리케이션 레이아웃. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">The general layout of a Rails application.</p></li>
<li><p>MVC(모델, 뷰, 컨트롤러) 그리고 RESTful 디자인의 기본적인 원리. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">The basic principles of MVC (Model, View, Controller) and RESTful design.</p></li>
<li><p>레일스 어플리케이션의 초석을 빠르게 만드는 법. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href='#' class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">How to quickly generate the starting pieces of a Rails application.</p></li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#%EA%B0%80%EC%9D%B4%EB%93%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B0%80%EC%A0%95-%EC%82%AC%ED%95%AD%EB%93%A4-guide-assumptions-%EC%9B%90%EB%AC%B8%C2%B7%EC%A0%84%EC%B2%B4">가이드에 대한 가정 사항들<span class="original-text-h">(Guide Assumptions)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup></a></li>
<li><a href="#%EB%A0%88%EC%9D%BC%EC%8A%A4%EB%9E%80-questionmark-what-is-rails-questionmark-%EC%9B%90%EB%AC%B8%C2%B7%EC%A0%84%EC%B2%B4">레일스란?<span class="original-text-h">(What is Rails?)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup></a></li>
<li>
<a href="#%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%A0%88%EC%9D%BC%EC%8A%A4-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0-creating-a-new-rails-project-%EC%9B%90%EB%AC%B8%C2%B7%EC%A0%84%EC%B2%B4">새로운 레일스 프로젝트 만들기<span class="original-text-h">(Creating a New Rails Project)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup></a>

<ul>
<li><a href="#%EB%A0%88%EC%9D%BC%EC%8A%A4-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0-installing-rails">레일스 설치하기 [[[Installing Rails]]]</a></li>
<li><a href="#%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A7%8C%EB%93%A4%EA%B8%B0-creating-the-blog-application">블로그 어플리케이션 만들기 [[[Creating the Blog Application]]]</a></li>
</ul>
</li>
<li>
<a href="#hello-rails-bang">Hello, Rails!</a>

<ul>
<li><a href="#starting-up-the-web-server">Starting up the Web Server</a></li>
<li><a href="#say-hello-rails">Say "Hello", Rails</a></li>
<li><a href="#setting-the-application-home-page">Setting the Application Home Page</a></li>
</ul>
</li>
<li>
<a href="#getting-up-and-running">Getting Up and Running</a>

<ul>
<li><a href="#laying-down-the-ground-work">Laying down the ground work</a></li>
<li><a href="#the-first-form">The first form</a></li>
<li><a href="#creating-posts">Creating posts</a></li>
<li><a href="#creating-the-post-model">Creating the Post model</a></li>
<li><a href="#running-a-migration">Running a Migration</a></li>
<li><a href="#saving-data-in-the-controller">Saving data in the controller</a></li>
<li><a href="#showing-posts">Showing Posts</a></li>
<li><a href="#listing-all-posts">Listing all posts</a></li>
<li><a href="#adding-links">Adding links</a></li>
<li><a href="#allowing-the-update-of-fields">Allowing the update of fields</a></li>
<li><a href="#adding-some-validation">Adding Some Validation</a></li>
<li><a href="#updating-posts">Updating Posts</a></li>
<li><a href="#using-partials-to-clean-up-duplication-in-views">Using partials to clean up duplication in views</a></li>
<li><a href="#deleting-posts">Deleting Posts</a></li>
</ul>
</li>
<li>
<a href="#adding-a-second-model">Adding a Second Model</a>

<ul>
<li><a href="#generating-a-model">Generating a Model</a></li>
<li><a href="#associating-models">Associating Models</a></li>
<li><a href="#adding-a-route-for-comments">Adding a Route for Comments</a></li>
<li><a href="#generating-a-controller">Generating a Controller</a></li>
</ul>
</li>
<li>
<a href="#refactoring">Refactoring</a>

<ul>
<li><a href="#rendering-partial-collections">Rendering Partial Collections</a></li>
<li><a href="#rendering-a-partial-form">Rendering a Partial Form</a></li>
</ul>
</li>
<li>
<a href="#deleting-comments">Deleting Comments</a>

<ul>
<li><a href="#deleting-associated-objects">Deleting Associated Objects</a></li>
</ul>
</li>
<li><a href="#security">Security</a></li>
<li><a href="#what-s-next-questionmark">What's Next?</a></li>
<li><a href="#configuration-gotchas">Configuration Gotchas</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="가이드에-대한-가정-사항들-guide-assumptions-원문·전체">1 가이드에 대한 가정 사항들<span class="original-text-h">(Guide Assumptions)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup>
</h3><p>이 가이드는 레일스 어플리케이션을 처음 부터 시작하는 초보자를 위한 것입니다. 레일스에 관한 어떤한 경험도 없음을 가정하고 쓰여진 것입니다. 하지만 최대한으로 얻어 가실려면 아래의 것들을 미리 설치하시면 됩니다. [[[This guide is designed for beginners who want to get started with a Rails
application from scratch. It does not assume that you have any prior experience
with Rails. However, to get the most out of it, you need to have some
prerequisites installed:]]]</p>
<ul>
<li>
<p><a href="http://www.ruby-lang.org/en/downloads">루비</a> 1.9.3 이상의 버젼 <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">The <a href="http://www.ruby-lang.org/en/downloads">Ruby</a> language version 1.9.3 or newer</p>
</li>
<li>
<p><a href="http://rubygems.org/">루비</a> 패키징 시스템 <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">The <a href="http://rubygems.org/">RubyGems</a> packaging system]]] 루비잼에 대해서 더 배우시길 원하신다면 <a href="http://docs.rubygems.org/read/book/1">RubyGems User Guide</a>를 읽기 바랍니다. [[[* To learn more about RubyGems, please read the <a href="http://docs.rubygems.org/read/book/1">루비잼 사용자 가이드</a></p>
</li>
<li>
<p>동작하는 <a href="http://www.sqlite.org">SQLite3 데이터베이스</a> <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">A working installation of the <a href="http://www.sqlite.org">SQLite3 Database</a></p>
</li>
</ul>
<p>레일스는 루비 프로그래밍 언어에서 동작하는 웹 어플리케이션 프레임워크입니다. 루비에 대한 경험이 없다면 
레일스로 바로 들어가기에는 진입장벽이 높을 것입니다. 인터넷이 루비를 배우기 위한 많은 무료자료들이 있습니다. 
대표적으로 아래의 것들이 있습니다.
[[[Rails is a web application framework running on the Ruby programming language.
If you have no prior experience with Ruby, you will find a very steep learning
curve diving straight into Rails. There are some good free resources on the
internet for learning Ruby, including:]]]</p>
<ul>
<li><p><a href="http://www.humblelittlerubybook.com">Mr. Neighborly's Humble Little Ruby Book</a></p></li>
<li><p><a href="http://www.ruby-doc.org/docs/ProgrammingRuby/">Programming Ruby</a></p></li>
<li><p><a href="http://mislav.uniqpath.com/poignant-guide/">Why's (Poignant) Guide to Ruby</a></p></li>
</ul>
<h3 id="레일스란-questionmark-what-is-rails-questionmark-원문·전체">2 레일스란?<span class="original-text-h">(What is Rails?)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup>
</h3><p>레일스는 루비로 작성된 웹 어플리케이션 개발 프레임워크 입니다.
모든 개발자들이 필요한 것을 미리 가정(설정)해 놓음으로서 웹 어플리케이션 개발이 더욱 쉽도록 디자인 되었습니다. 
그 어떤 언어나 프레임워크보다도 적은 코드를 작성하게 끔 만들어 졌습니다. 
숙련된 레일스 개발자들에 의하면 웹 개발을 더욱 재미있게 만들어 주기까지 한답니다.
[[[Rails is a web application development framework written in the Ruby language.
It is designed to make programming web applications easier by making assumptions
about what every developer needs to get started. It allows you to write less
code while accomplishing more than many other languages and frameworks.
Experienced Rails developers also report that it makes web application
development more fun.]]]</p><p>레일스는 독단적인 소프트웨어 입니다. "최선"의 방법이 있다고 가정하고 그 방법을 사용하도록 독려를 합니다.
때로는 다른 방법의 사용하지 않게 추천합니다. "The Rails Way"(레일스 방법론?)을 배우게 된다면 엄청나게 효율성이 늘어난다는 것을 느낄수 있을 것입니다.
다른 언어에서 사용하던 오래된 습관을 고집하고나 다른 곳에서 배운 패턴들을 사용하려고 한다면 아마도 덜 즐거운 경험이 될 것입니다.
[[[Rails is opinionated software. It makes the assumption that there is the "best"
way to do things, and it's designed to encourage that way - and in some cases to
discourage alternatives. If you learn "The Rails Way" you'll probably discover a
tremendous increase in productivity. If you persist in bringing old habits from
other languages to your Rails development, and trying to use patterns you
learned elsewhere, you may have a less happy experience.]]]</p><p>레이스의 철학은 두가지의 핵심 원리로 이루어져 있습니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">The Rails philosophy includes two major guiding principles:</p>
<ul>
<li>
<p>DRY - "Don't Repeat Yourself"(너 자신을 반복하지마라, 했던 것을 또 하지마라) - DRY는 작성했던 코드를 반복해서 다시 작성하는 것은 나쁜 것임을 시사합니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">DRY - "Don't Repeat Yourself" - suggests that writing the same code over and over again is a bad thing.</p>
</li>
<li>
<p>설정보다는 규칙 - 말인 즉슨 레일스가 당신이 무엇을 원하는지 그리고 어떻게 할 것인지에 대한 가정을 하고 작은 사항까지 끝이 없는 설정을 요구하는 것이 아닙니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">Convention Over Configuration - means that Rails makes assumptions about what you want to do and how you're going to do it, rather than requiring you to specify every little thing through endless configuration files.</p>
</li>
</ul>
<h3 id="새로운-레일스-프로젝트-만들기-creating-a-new-rails-project-원문·전체">3 새로운 레일스 프로젝트 만들기<span class="original-text-h">(Creating a New Rails Project)</span> <sup><a href="#" class="original-link" onclick="$(this).parent().prev().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text, .original-text-h').toggle();return false;">전체}</a></sup>
</h3><p>이 가이드를 사용하기 가장 좋은 방법은 매 단계를 따라하는 것입니다. 이 예시 어플리케이션에서의 어떠한 코드나 과정도 빠지지 않았습니다. 말그대로 단계 단계 그대로 따라하면 됩니다. <a href="https://github.com/lifo/docrails/tree/master/guides/code/getting_started">여기</a>.에서 완성된 코드를 받으실수 있습니다.
[[[The best way to use this guide is to follow each step as it happens, no code or
step needed to make this example application has been left out, so you can
literally follow along step by step. You can get the complete code
<a href="https://github.com/lifo/docrails/tree/master/guides/code/getting_started">here</a>.]]]</p><p>가이드를 따라감으로써 (매우) 간단한 웹블로그 'blog'라는 레일스 프로 젝트를 생성하게 될 것입니다.
어플리케이션을 제작하기 시작하기 전에 레일스가 설치되어있는지 확인 해야합니다.
[[[By following along with this guide, you'll create a Rails project called
<code>blog</code>, a
(very) simple weblog. Before you can start building the application, you need to
make sure that you have Rails itself installed.]]]</p><div class="info">
<p> '#'과 '$'는 UNIX-like OS(유사 유니스 운영체제)의 터미널 프롬프트에서 각각 슈퍼유저와 일반유저를 나타내는 것입니다. 윈도우를 사용하신다면 <code>c:\source_code&gt;</code>과 같이 표시될 것입니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">The examples below use <code>#</code> and <code>$</code> to denote superuser and regular user terminal prompts respectively in a UNIX-like OS. If you are using Windows, your prompt will look something like <code>c:\source_code&gt;</code></p>
</div><h4 id="레일스-설치하기-installing-rails">3.1 레일스 설치하기 [[[Installing Rails]]]</h4><p>커맨드 라인 프롬프트를 엽니다. 맥 OS X에서 터미널.app을 윈도우에서는 스타트 메뉴에 있는 "Run"에서 'cmd.exe'를 실행시킵니다.
어떠한 명령어도 달라 싸인 '$'과 앞에 붙어 나오는 경우에는 커맨드 라인을 실행 시켜야합니다. 최신 버젼의 루비가 설치되어 있는지 확인합니다.
[[[Open up a command line prompt. On Mac OS X open Terminal.app, on Windows choose
"Run" from your Start menu and type 'cmd.exe'. Any commands prefaced with a
dollar sign <code>$</code> should be run in the command line. Verify that you have a
current version of Ruby installed:]]]</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ ruby -v
ruby 1.9.3p385

</pre>
</div>
<p>레일스를 설치하기 위해서 루비잼에 의해서 제공되는 'gem install' 명령을 사용합니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">To install Rails, use the <code>gem install</code> command provided by RubyGems:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ gem install rails

</pre>
</div>
<div class="info"><p> 루비 온 레일스를 빠르게 설치하기를 도와줄 많은 툴들이 존재합니다. 윈도우 사용자들은  <a href="http://railsinstaller.org">Rails Installer</a>, 맥 OS X 사용자들은 <a href="http://railsoneclick.com">Rails One Click</a>을 사용하실수 있습니다. [[[A number of tools exist to help you quickly install Ruby and Ruby
on Rails on your system. Windows users can use <a href="http://railsinstaller.org">Rails Installer</a>, while Mac OS X users can use
<a href="http://railsoneclick.com">Rails One Click</a>.]]]</p></div><p>모든 것이 제대로 설치 되었는지 확인하기 위해서는 아래의 명령어들을 실행 시킬수 있으셔야 합니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">To verify that you have everything installed correctly, you should be able to run the following:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails --version

</pre>
</div>
<p>먄약 "Rails 4.0.0"와 같이 나타난다면 계속 진행 하실 준비가 되신 것 입니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">If it says something like "Rails 4.0.0", you are ready to continue.</p><h4 id="블로그-어플리케이션-만들기-creating-the-blog-application">3.2 블로그 어플리케이션 만들기 [[[Creating the Blog Application]]]</h4><p>레일스는 특정한 업무를 시작하는 데 필요한것을 만들어 줌으로 개발자들의 삶을 편하게 만들어줄 많은 제너레이터(generators)라는 스크립트와 함께 옵니다. 이런 스크립트중 하나인 새 어플리케이션 제너레이터 (new application generator)는 개발자 스스로 작성할 필요없이, 레일스 어플리케이션의 기본적인 구조를 제공합니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">Rails comes with a number of scripts called generators that are designed to make your development life easier by creating everything that's necessary to start working on a particular task. One of these is the new application generator, which will provide you with the foundation of a fresh Rails application so that you don't have to write it yourself.</p><p>제너레이터를 사용하기 위해서는 터미널을 열고 파일 쓰기 권한이 있는 디렉토리에 가서 아래와 같이 치면 됩니다: <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">To use this generator, open a terminal, navigate to a directory where you have rights to create files, and type:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails new blog

</pre>
</div>
<p>이 과정은 blog 디렉토리에 Blog라고 불리는 레일스 에플리케이션을 생성할것이고 <code>bundle install</code>을 통해서 <code>Gemfile</code>에 게시되어 있는 젬들과 의존 젬들을 설치합니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">This will create a Rails application called Blog in a directory called blog and install the gem dependencies that are already mentioned in <code>Gemfile</code> using <code>bundle install</code>.</p><div class="info">
<p> 레일스 어플리케이션 빌더가 허락하는 모든 커맨드 라인 옵션은 <code>rails new -h</code>을 실행시킴으로써 확인할 수 있습니다. <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p>
<p class="original-text">You can see all of the command line options that the Rails application builder accepts by running <code>rails new -h</code>.</p>
</div><p>blog 어플리케이션을 생성후 어플리케이션에서 직접 작업을 할수있도록 그 폴더로 옮겨갑니다: <sup><a href="#" class="original-link" onclick="$(this).parent().parent().next().toggle();return false;">{원문</a><a href="#" class="original-link">·</a><a href="#" class="original-link" onclick="$('.original-text').toggle();return false;">전체}</a></sup></p><p class="original-text">After you create the blog application, switch to its folder to continue work directly in that application:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd blog

</pre>
</div>
<p>위에서 실행시킨 명령인 <code>rails new blog</code>는 현제 작업하는 경로에 <code>blog</code>라는 폴더를 생성해 줍니다.
<code>blog</code> 디렉토리에는 레일스 어플리케이션의 골격을 구성하는 많은 자동생성된 파일과 폴더들이 있습니다.
이 튜토리얼의 대부분의 작업은 <code>app/</code> 폴더에서 일어날 것이지만 여기 레일스가 기본적으로 생성하는 파일과 폴더들의 기능들의 기본적 설명이 있습니다.
[[[The <code>rails new blog</code> command we ran above created a folder in your
working directory called <code>blog</code>. The <code>blog</code> directory has a number of
auto-generated files and folders that make up the structure of a Rails
application. Most of the work in this tutorial will happen in the <code>app/</code> folder, but here's a basic rundown on the function of each of the files and folders that Rails created by default:]]]</p>
<table>
<thead>
<tr>
<th>File/Folder</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/</td>
<td>어플리케이션을 위한 컨트롤러(controllers),모델(models),뷰(views),헬퍼(helpers),메일러(mailers) 그리고 어셑(assets)들을 포함하고 있습니다. 가이드 나머지 부분에서 이 폴더를 계속 집중 하게 될 것입니다.</td>
</tr>
<tr>
<td>bin/</td>
<td>당신의 엡을 시작하게 할 레일스 스크립트를 포함하고 있으며 디플로이(deploy)또는 엡을 실행 시킬떄 사용하게 될 다른 스크립트들을 포함 할수 있습니다.</td>
</tr>
<tr>
<td>config/</td>
<td>런타임 규칙, 경로(routes),데이타베이스 등을 설정하실수 있습니다. 자세한 사항은 <a href="configuring.html">레일스 에플리케이션 설정하기</a>에서 다룹니다.</td>
</tr>
<tr>
<td>config.ru</td>
<td>에플리케이션을 시작하는데 사용되는 레이크로 구성된 서버를 위한한 레이크 설정(Rack configuration).</td>
</tr>
<tr>
<td>db/</td>
<td>현재의 데이터베이스 개요(database schema) 그리고 데이터베이스 마이그레이션(database migrations)을 포함하고 있습니다.</td>
</tr>
<tr>
<td>Gemfile<br>Gemfile.lock</td>
<td>이 파일들은 레일스 에플리케이션에 필요한 잼 종속성(dependencies)을 명시하는 곳입니다.이 파일들은 번들러 잼(Bundler gem)에 의해서 사용됩니다.번들러에 관한 더 많은 정보는 <a href="http://gembundler.com">번들러 웹페이지</a>에서 확인하시길 바랍니다.</td>
</tr>
<tr>
<td>lib/</td>
<td>당신의 어플레케이션을 위한 확장 모듈들.</td>
</tr>
<tr>
<td>log/</td>
<td>어플리케이션의 로그 파일들.</td>
</tr>
<tr>
<td>public/</td>
<td>그 자체로 세상에 보여지는 유일한 폴더입니다. 정적 파일들과 컴파일된 어셑들을 포함하고 있습니다.</td>
</tr>
<tr>
<td>Rakefile</td>
<td>이 파일은 커맨드 라인에서 실행될수있는 테스크들을 위치시키고 로드 시킵니다. 테스크에 대한 정의들은 레일스 컴포넌트 도처에 정의 되어있습니다. 레이크파일(Rakefile)을 수정하기 보다는 에플리케이션의 lib/tasks 경로에 파일을 추가함으로서 자신만의 테스크를 추가하는것이 바람직 합니다.</td>
</tr>
<tr>
<td>README.rdoc</td>
<td>이 파일은 당신의 에플리케이션의 간단한 사용 설명서입니다. 이 파일은 다른사람들에게 어플리케이션이 무엇을 하는지, 어떻게 사용할지 설명하기, 등을 위해서 수정해야 합니다.</td>
</tr>
<tr>
<td>test/</td>
<td>유닡 테스트(unit tests), fixtures 그리고 다른 테스트 장치들. 자세한 사항은 <a href="testing.html">레일스 어플리케이션 테스트 하기</a>에서 다뤄 집니다.</td>
</tr>
<tr>
<td>tmp/</td>
<td>임시 파일들.(케쉬, pid 그리고 세션파일들)</td>
</tr>
<tr>
<td>vendor/</td>
<td>모든 써드 파디 코드를 두는 곳입니다. 일반적인 레일스 어플리케이션에서는 루비 잼 과 레일즈 보안 코드(만약 선택적으로 프로젝트에 설치를 원한다면)가 포합됩니다.</td>
</tr>
</tbody>
</table>
<h3 id="hello-rails-bang">4 Hello, Rails!</h3><p>To begin with, let's get some text up on screen quickly. To do this, you need to get your Rails application server running.</p><h4 id="starting-up-the-web-server">4.1 Starting up the Web Server</h4><p>You actually have a functional Rails application already. To see it, you need to start a web server on your development machine. You can do this by running:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails server

</pre>
</div>
<div class="info"><p> Compiling CoffeeScript to JavaScript requires a JavaScript runtime and the absence of a runtime will give you an <code>execjs</code> error. Usually Mac OS X and Windows come with a JavaScript runtime installed. Rails adds the <code>therubyracer</code> gem to Gemfile in a commented line for new apps and you can uncomment if you need it. <code>therubyrhino</code> is the recommended runtime for JRuby users and is added by default to Gemfile in apps generated under JRuby. You can investigate about all the supported runtimes at <a href="https://github.com/sstephenson/execjs#readme">ExecJS</a>.</p></div><p>This will fire up WEBrick, a webserver built into Ruby by default. To see your application in action, open a browser window and navigate to <a href="http://localhost:3000">http://localhost:3000</a>. You should see the Rails default information page:</p><p><img src="images/getting_started/rails_welcome.png" alt="Welcome Aboard screenshot"></p><div class="info"><p> To stop the web server, hit Ctrl+C in the terminal window where it's running. To verify the server has stopped you should see your command prompt cursor again. For most UNIX-like systems including Mac OS X this will be a dollar sign <code>$</code>. In development mode, Rails does not generally require you to restart the server; changes you make in files will be automatically picked up by the server.</p></div><p>The "Welcome Aboard" page is the <em>smoke test</em> for a new Rails application: it makes sure that you have your software configured correctly enough to serve a page. You can also click on the <em>About your application’s environment</em> link to see a summary of your application's environment.</p><h4 id="say-hello-rails">4.2 Say "Hello", Rails</h4><p>To get Rails saying "Hello", you need to create at minimum a <em>controller</em> and a <em>view</em>.</p><p>A controller's purpose is to receive specific requests for the application. <em>Routing</em> decides which controller receives which requests. Often, there is more than one route to each controller, and different routes can be served by different <em>actions</em>. Each action's purpose is to collect information to provide it to a view.</p><p>A view's purpose is to display this information in a human readable format. An important distinction to make is that it is the <em>controller</em>, not the view, where information is collected. The view should just display that information. By default, view templates are written in a language called ERB (Embedded Ruby) which is converted by the request cycle in Rails before being sent to the user.</p><p>To create a new controller, you will need to run the "controller" generator and tell it you want a controller called "welcome" with an action called "index", just like this:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails generate controller welcome index

</pre>
</div>
<p>Rails will create several files and a route for you.</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
create  app/controllers/welcome_controller.rb
 route  get "welcome/index"
invoke  erb
create    app/views/welcome
create    app/views/welcome/index.html.erb
invoke  test_unit
create    test/controllers/welcome_controller_test.rb
invoke  helper
create    app/helpers/welcome_helper.rb
invoke    test_unit
create      test/helpers/welcome_helper_test.rb
invoke  assets
invoke    coffee
create      app/assets/javascripts/welcome.js.coffee
invoke    scss
create      app/assets/stylesheets/welcome.css.scss

</pre>
</div>
<p>Most important of these are of course the controller, located at <code>app/controllers/welcome_controller.rb</code> and the view, located at <code>app/views/welcome/index.html.erb</code>.</p><p>Open the <code>app/views/welcome/index.html.erb</code> file in your text editor. Delete all of the existing code in the file, and replace it with the following single line of code:</p><div class="code_container">
<pre class="brush: xml; gutter: false; toolbar: false">
&lt;h1&gt;Hello, Rails!&lt;/h1&gt;

</pre>
</div>
<h4 id="setting-the-application-home-page">4.3 Setting the Application Home Page</h4><p>Now that we have made the controller and view, we need to tell Rails when we want Hello Rails! to show up. In our case, we want it to show up when we navigate to the root URL of our site, <a href="http://localhost:3000">http://localhost:3000</a>. At the moment, "Welcome Aboard" is occupying that spot.</p><p>Next, you have to tell Rails where your actual home page is located.</p><p>Open the file <code>config/routes.rb</code> in your editor.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
Blog::Application.routes.draw do
  get "welcome/index"

  # The priority is based upon order of creation:
  # first created -&gt; highest priority.
  # ...
  # You can have the root of your site routed with "root"
  # root to: "welcome#index"

</pre>
</div>
<p>This is your application's <em>routing file</em> which holds entries in a special DSL (domain-specific language) that tells Rails how to connect incoming requests to controllers and actions. This file contains many sample routes on commented lines, and one of them actually shows you how to connect the root of your site to a specific controller and action. Find the line beginning with <code>root :to</code> and uncomment it. It should look something like the following:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
root to: "welcome#index"

</pre>
</div>
<p>The <code>root to: "welcome#index"</code> tells Rails to map requests to the root of the application to the welcome controller's index action and <code>get "welcome/index"</code> tells Rails to map requests to <a href="http://localhost:3000/welcome/index">http://localhost:3000/welcome/index</a> to the welcome controller's index action. This was created earlier when you ran the controller generator (<code>rails generate controller welcome index</code>).</p><p>If you navigate to <a href="http://localhost:3000">http://localhost:3000</a> in your browser, you'll see the <code>Hello, Rails!</code> message you put into <code>app/views/welcome/index.html.erb</code>, indicating that this new route is indeed going to <code>WelcomeController</code>'s <code>index</code> action and is rendering the view correctly.</p><div class="info"><p> For more information about routing, refer to <a href="routing.html">Rails Routing from the Outside In</a>.</p></div><h3 id="getting-up-and-running">5 Getting Up and Running</h3><p>Now that you've seen how to create a controller, an action and a view, let's create something with a bit more substance.</p><p>In the Blog application, you will now create a new <em>resource</em>. A resource is the term used for a collection of similar objects, such as posts, people or animals. You can create, read, update and destroy items for a resource and these operations are referred to as <em>CRUD</em> operations.</p><p>Rails provides a <code>resources</code> method which can be used to declare a
standard REST resource. Here's how <code>config/routes.rb</code> will look like.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
Blog::Application.routes.draw do

  resources :posts

  root to: "welcome#index"
end

</pre>
</div>
<p>If you run <code>rake routes</code>, you'll see that all the routes for the 
standard RESTful actions.</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rake routes
    posts GET    /posts(.:format)          posts#index
          POST   /posts(.:format)          posts#create
 new_post GET    /posts/new(.:format)      posts#new
edit_post GET    /posts/:id/edit(.:format) posts#edit
     post GET    /posts/:id(.:format)      posts#show
          PATCH  /posts/:id(.:format)      posts#update
          PUT    /posts/:id(.:format)      posts#update
          DELETE /posts/:id(.:format)      posts#destroy
     root        /                         welcome#index

</pre>
</div>
<p>In the next section, you will add the ability to create new posts in your application and be able to view them. This is the "C" and the "R" from CRUD: creation and reading. The form for doing this will look like this:</p><p><img src="images/getting_started/new_post.png" alt="The new post form"></p><p>It will look a little basic for now, but that's ok. We'll look at improving the styling for it afterwards.</p><h4 id="laying-down-the-ground-work">5.1 Laying down the ground work</h4><p>The first thing that you are going to need to create a new post within the application is a place to do that. A great place for that would be at <code>/posts/new</code>.  With the route already defined, requests can now be made to <code>/posts/new</code> in the application. Navigate to <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> and you'll see a routing error:</p><p><img src="images/getting_started/routing_error_no_controller.png" alt="Another routing error, uninitialized constant PostsController"></p><p>This error occurs because the route needs to have a controller defined in order to serve the request. The solution to this particular problem is simple: create a controller called <code>PostsController</code>. You can do this by running this command:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails g controller posts

</pre>
</div>
<p>If you open up the newly generated <code>app/controllers/posts_controller.rb</code> you'll see a fairly empty controller:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class PostsController &lt; ApplicationController
end

</pre>
</div>
<p>A controller is simply a class that is defined to inherit from <code>ApplicationController</code>. It's inside this class that you'll define methods that will become the actions for this controller. These actions will perform CRUD operations on the posts within our system.</p><p>If you refresh <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> now, you'll get a new error:</p><p><img src="images/getting_started/unknown_action_new_for_posts.png" alt="Unknown action new for PostsController!"></p><p>This error indicates that Rails cannot find the <code>new</code> action inside the <code>PostsController</code> that you just generated. This is because when controllers are generated in Rails they are empty by default, unless you tell it you wanted actions during the generation process.</p><p>To manually define an action inside a controller, all you need to do is to define a new method inside the controller. Open <code>app/controllers/posts_controller.rb</code> and inside the <code>PostsController</code> class, define a <code>new</code> method like this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def new
end

</pre>
</div>
<p>With the <code>new</code> method defined in <code>PostsController</code>, if you refresh <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> you'll see another error:</p><p><img src="images/getting_started/template_is_missing_posts_new.png" alt="Template is missing for posts/new"></p><p>You're getting this error now because Rails expects plain actions like this one to have views associated with them to display their information. With no view available, Rails errors out.</p><p>In the above image, the bottom line has been truncated. Let's see what the full thing looks like:</p>
<blockquote>
Missing template posts/new, application/new with {locale:[:en], formats:[:html], handlers:[:erb, :builder, :coffee]}. Searched in: * "/path/to/blog/app/views"
</blockquote>
<p>That's quite a lot of text! Let's quickly go through and understand what each part of it does.</p><p>The first part identifies what template is missing. In this case, it's the <code>posts/new</code> template. Rails will first look for this template. If not found, then it will attempt to load a template called <code>application/new</code>. It looks for one here because the <code>PostsController</code> inherits from <code>ApplicationController</code>.</p><p>The next part of the message contains a hash. The <code>:locale</code> key in this hash simply indicates what spoken language template should be retrieved. By default, this is the English — or "en" — template. The next key, <code>:formats</code> specifies the format of template to be served in response. The default format is <code>:html</code>, and so Rails is looking for an HTML template. The final key, <code>:handlers</code>, is telling us what <em>template handlers</em> could be used to render our template. <code>:erb</code> is most commonly used for HTML templates, <code>:builder</code> is used for XML templates, and <code>:coffee</code> uses CoffeeScript to build JavaScript templates.</p><p>The final part of this message tells us where Rails has looked for the templates. Templates within a basic Rails application like this are kept in a single location, but in more complex applications it could be many different paths.</p><p>The simplest template that would work in this case would be one located at <code>app/views/posts/new.html.erb</code>. The extension of this file name is key: the first extension is the <em>format</em> of the template, and the second extension is the <em>handler</em> that will be used. Rails is attempting to find a template called <code>posts/new</code> within <code>app/views</code> for the application. The format for this template can only be <code>html</code> and the handler must be one of <code>erb</code>, <code>builder</code> or <code>coffee</code>. Because you want to create a new HTML form, you will be using the <code>ERB</code> language. Therefore the file should be called <code>posts/new.html.erb</code> and needs to be located inside the <code>app/views</code> directory of the application.</p><p>Go ahead now and create a new file at <code>app/views/posts/new.html.erb</code> and write this content in it:</p><div class="code_container">
<pre class="brush: xml; gutter: false; toolbar: false">
&lt;h1&gt;New Post&lt;/h1&gt;

</pre>
</div>
<p>When you refresh <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> you'll now see that the page has a title. The route, controller, action and view are now working harmoniously! It's time to create the form for a new post.</p><h4 id="the-first-form">5.2 The first form</h4><p>To create a form within this template, you will use a <em>form
builder</em>. The primary form builder for Rails is provided by a helper
method called <code>form_for</code>. To use this method, add this code into <code>app/views/posts/new.html.erb</code>:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for :post do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

</pre>
</div>
<p>If you refresh the page now, you'll see the exact same form as in the example. Building forms in Rails is really just that easy!</p><p>When you call <code>form_for</code>, you pass it an identifying object for this
form. In this case, it's the symbol <code>:post</code>. This tells the <code>form_for</code>
helper what this form is for. Inside the block for this method, the
<code>FormBuilder</code> object — represented by <code>f</code> — is used to build two labels and two text fields, one each for the title and text of a post. Finally, a call to <code>submit</code> on the <code>f</code> object will create a submit button for the form.</p><p>There's one problem with this form though. If you inspect the HTML that is generated, by viewing the source of the page, you will see that the <code>action</code> attribute for the form is pointing at <code>/posts/new</code>. This is a problem because this route goes to the very page that you're on right at the moment, and that route should only be used to display the form for a new post.</p><p>The form needs to use a different URL in order to go somewhere else.
This can be done quite simply with the <code>:url</code> option of <code>form_for</code>.
Typically in Rails, the action that is used for new form submissions
like this is called "create", and so the form should be pointed to that action.</p><p>Edit the <code>form_for</code> line inside <code>app/views/posts/new.html.erb</code> to look like this:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for :post, url: posts_path do |f| %&gt;

</pre>
</div>
<p>In this example, the <code>posts_path</code> helper is passed to the <code>:url</code> option. What Rails will do with this is that it will point the form to the <code>create</code> action of the current controller, the <code>PostsController</code>, and will send a <code>POST</code> request to that route.</p><p>By using the <code>post</code> method rather than the <code>get</code> method, Rails will define a route that will only respond to POST methods. The POST method is the typical method used by forms all over the web.</p><p>With the form and its associated route defined, you will be able to fill in the form and then click the submit button to begin the process of creating a new post, so go ahead and do that. When you submit the form, you should see a familiar error:</p><p><img src="images/getting_started/unknown_action_create_for_posts.png" alt="Unknown action create for PostsController"></p><p>You now need to create the <code>create</code> action within the <code>PostsController</code> for this to work.</p><h4 id="creating-posts">5.3 Creating posts</h4><p>To make the "Unknown action" go away, you can define a <code>create</code> action within the <code>PostsController</code> class in <code>app/controllers/posts_controller.rb</code>, underneath the <code>new</code> action:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class PostsController &lt; ApplicationController
  def new
  end

  def create
  end
end

</pre>
</div>
<p>If you re-submit the form now, you'll see another familiar error: a template is missing. That's ok, we can ignore that for now. What the <code>create</code> action should be doing is saving our new post to a database.</p><p>When a form is submitted, the fields of the form are sent to Rails as <em>parameters</em>. These parameters can then be referenced inside the controller actions, typically to perform a particular task. To see what these parameters look like, change the <code>create</code> action to this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def create
  render text: params[:post].inspect
end

</pre>
</div>
<p>The <code>render</code> method here is taking a very simple hash with a key of <code>text</code> and value of <code>params[:post].inspect</code>. The <code>params</code> method is the object which represents the parameters (or fields) coming in from the form. The <code>params</code> method returns an <code>ActiveSupport::HashWithIndifferentAccess</code> object, which allows you to access the keys of the hash using either strings or symbols. In this situation, the only parameters that matter are the ones from the form.</p><p>If you re-submit the form one more time you'll now no longer get the missing template error. Instead, you'll see something that looks like the following:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
{"title"=&gt;"First post!", "text"=&gt;"This is my first post."}

</pre>
</div>
<p>This action is now displaying the parameters for the post that are coming in from the form. However, this isn't really all that helpful. Yes, you can see the parameters but nothing in particular is being done with them.</p><h4 id="creating-the-post-model">5.4 Creating the Post model</h4><p>Models in Rails use a singular name, and their corresponding database tables use
a plural name. Rails provides a generator for creating models, which
most Rails developers tend to use when creating new models.
To create the new model, run this command in your terminal:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails generate model Post title:string text:text

</pre>
</div>
<p>With that command we told Rails that we want a <code>Post</code> model, together
with a <em>title</em> attribute of type string, and a <em>text</em> attribute
of type text. Those attributes are automatically added to the <code>posts</code>
table in the database and mapped to the <code>Post</code> model.</p><p>Rails responded by creating a bunch of files. For
now, we're only interested in <code>app/models/post.rb</code> and
<code>db/migrate/20120419084633_create_posts.rb</code> (your name could be a bit
different). The latter is responsible
for creating the database structure, which is what we'll look at next.</p><div class="info"><p> Active Record is smart enough to automatically map column names to
model attributes, which means you don't have to declare attributes
inside Rails models, as that will be done automatically by Active
Record.</p></div><h4 id="running-a-migration">5.5 Running a Migration</h4><p>As we've just seen, <code>rails generate model</code> created a <em>database
migration</em> file inside the <code>db/migrate</code> directory.
Migrations are Ruby classes that are designed to make it simple to
create and modify database tables. Rails uses rake commands to run migrations,
and it's possible to undo a migration after it's been applied to your database.
Migration filenames include a timestamp to ensure that they're processed in the
order that they were created.</p><p>If you look in the <code>db/migrate/20120419084633_create_posts.rb</code> file (remember,
yours will have a slightly different name), here's what you'll find:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class CreatePosts &lt; ActiveRecord::Migration
  def change
    create_table :posts do |t|
      t.string :title
      t.text :text

      t.timestamps
    end
  end
end

</pre>
</div>
<p>The above migration creates a method named <code>change</code> which will be called when you
run this migration. The action defined in this method is also reversible, which
means Rails knows how to reverse the change made by this migration, in case you
want to reverse it later. When you run this migration it will create a
<code>posts</code> table with one string column and a text column. It also creates two
timestamp fields to allow Rails to track post creation and update times.</p><div class="info"><p> For more information about migrations, refer to <a href="migrations.html">Rails Database
Migrations</a>.</p></div><p>At this point, you can use a rake command to run the migration:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rake db:migrate

</pre>
</div>
<p>Rails will execute this migration command and tell you it created the Posts
table.</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
==  CreatePosts: migrating ====================================================
-- create_table(:posts)
   -&gt; 0.0019s
==  CreatePosts: migrated (0.0020s) ===========================================

</pre>
</div>
<div class="note"><p> Because you're working in the development environment by default, this
command will apply to the database defined in the <code>development</code> section of your
<code>config/database.yml</code> file. If you would like to execute migrations in another
environment, for instance in production, you must explicitly pass it when
invoking the command: <code>rake db:migrate RAILS_ENV=production</code>.</p></div><h4 id="saving-data-in-the-controller">5.6 Saving data in the controller</h4><p>Back in <code>posts_controller</code>, we need to change the <code>create</code> action
to use the new <code>Post</code> model to save the data in the database. Open <code>app/controllers/posts_controller.rb</code>
and change the <code>create</code> action to look like this:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def create
  @post = Post.new(params[:post])

  @post.save
  redirect_to @post 
end

</pre>
</div>
<p>Here's what's going on: every Rails model can be initialized with its
respective attributes, which are automatically mapped to the respective
database columns. In the first line we do just that (remember that
<code>params[:post]</code> contains the attributes we're interested in). Then,
<code>@post.save</code> is responsible for saving the model in the database.
Finally, we redirect the user to the <code>show</code> action,
which we'll define later.</p><div class="info"><p> As we'll see later, <code>@post.save</code> returns a boolean indicating
whether the model was saved or not.</p></div><h4 id="showing-posts">5.7 Showing Posts</h4><p>If you submit the form again now, Rails will complain about not finding
the <code>show</code> action. That's not very useful though, so let's add the
<code>show</code> action before proceeding. </p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
post GET    /posts/:id(.:format)      posts#show

</pre>
</div>
<p>The special syntax <code>:id</code> tells rails that this route expects an <code>:id</code>
parameter, which in our case will be the id of the post. </p><p>As we did before, we need to add the <code>show</code> action in
<code>app/controllers/posts_controller.rb</code> and its respective view.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def show
  @post = Post.find(params[:id])
end

</pre>
</div>
<p>A couple of things to note. We use <code>Post.find</code> to find the post we're
interested in. We also use an instance variable (prefixed by <code>@</code>) to
hold a reference to the post object. We do this because Rails will pass all instance
variables to the view.</p><p>Now, create a new file <code>app/views/posts/show.html.erb</code> with the following
content:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

</pre>
</div>
<p>If you now go to
<a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> you'll <em>almost</em> be able to create a post. Try
it! You should get an error that looks like this:</p><p><img src="images/getting_started/forbidden_attributes_for_new_post.png" alt="Forbidden attributes for new post"></p><p>Rails has several security features that help you write secure applications,
and you're running into one of them now. This one is called
'strong_parameters,' which requires us to tell Rails exactly which parameters
we want to accept in our controllers. In this case, we want to allow the
'title' and 'text' parameters, so change your <code>create</code> controller action to
look like this:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
  def create
    @post = Post.new(params[:post].permit(:title, :text))

    @post.save
    redirect_to @post
  end

</pre>
</div>
<p>See the <code>permit</code>? It allows us to accept both <code>title</code> and <code>text</code> in this
action. With this change, you should finally be able to create new <code>Post</code>s.
Visit <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> and give it a try!</p><p><img src="images/getting_started/show_action_for_posts.png" alt="Show action for posts"></p><h4 id="listing-all-posts">5.8 Listing all posts</h4><p>We still need a way to list all our posts, so let's do that. 
We'll use a specific route from <code>config/routes.rb</code>:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
posts GET    /posts(.:format)          posts#index

</pre>
</div>
<p>And an action for that route inside the <code>PostsController</code> in the <code>app/controllers/posts_controller.rb</code> file:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def index
  @posts = Post.all
end

</pre>
</div>
<p>And then finally a view for this action, located at <code>app/views/posts/index.html.erb</code>:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;Listing posts&lt;/h1&gt;

&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
  &lt;/tr&gt;

  &lt;% @posts.each do |post| %&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;%= post.title %&gt;&lt;/td&gt;
      &lt;td&gt;&lt;%= post.text %&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
&lt;/table&gt;

</pre>
</div>
<p>Now if you go to <code>http://localhost:3000/posts</code> you will see a list of all the posts that you have created.</p><h4 id="adding-links">5.9 Adding links</h4><p>You can now create, show, and list posts. Now let's add some links to
navigate through pages.</p><p>Open <code>app/views/welcome/index.html.erb</code> and modify it as follows:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;Hello, Rails!&lt;/h1&gt;
&lt;%= link_to "My Blog", controller: "posts" %&gt;

</pre>
</div>
<p>The <code>link_to</code> method is one of Rails' built-in view helpers. It creates a
hyperlink based on text to display and where to go - in this case, to the path
for posts.</p><p>Let's add links to the other views as well, starting with adding this "New Post" link to <code>app/views/posts/index.html.erb</code>, placing it above the <code>&lt;table&gt;</code> tag:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= link_to 'New post', new_post_path %&gt;

</pre>
</div>
<p>This link will allow you to bring up the form that lets you create a new post. You should also add a link to this template — <code>app/views/posts/new.html.erb</code> — to go back to the <code>index</code> action. Do this by adding this underneath the form in this template:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for :post do |f| %&gt;
  ...
&lt;% end %&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<p>Finally, add another link to the <code>app/views/posts/show.html.erb</code> template to go back to the <code>index</code> action as well, so that people who are viewing a single post can go back and view the whole list again:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<div class="info"><p> If you want to link to an action in the same controller, you don't
need to specify the <code>:controller</code> option, as Rails will use the current
controller by default.</p></div><div class="info"><p> In development mode (which is what you're working in by default), Rails
reloads your application with every browser request, so there's no need to stop
and restart the web server when a change is made.</p></div><h4 id="allowing-the-update-of-fields">5.10 Allowing the update of fields</h4><p>The model file, <code>app/models/post.rb</code> is about as simple as it can get:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Post &lt; ActiveRecord::Base
end

</pre>
</div>
<p>There isn't much to this file - but note that the <code>Post</code> class inherits from
<code>ActiveRecord::Base</code>. Active Record supplies a great deal of functionality to
your Rails models for free, including basic database CRUD (Create, Read, Update,
Destroy) operations, data validation, as well as sophisticated search support
and the ability to relate multiple models to one another.</p><h4 id="adding-some-validation">5.11 Adding Some Validation</h4><p>Rails includes methods to help you validate the data that you send to models.
Open the <code>app/models/post.rb</code> file and edit it:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Post &lt; ActiveRecord::Base
  validates :title, presence: true,
                    length: { minimum: 5 }
end

</pre>
</div>
<p>These changes will ensure that all posts have a title that is at least five
characters long.  Rails can validate a variety of conditions in a model,
including the presence or uniqueness of columns, their format, and the
existence of associated objects. Validations are covered in detail in <a href="active_record_validations.html">Active
Record Validations</a></p><p>With the validation now in place, when you call <code>@post.save</code> on an invalid
post, it will return <code>false</code>. If you open <code>app/controllers/posts_controller.rb</code>
again, you'll notice that we don't check the result of calling <code>@post.save</code>
inside the <code>create</code> action. If <code>@post.save</code> fails in this situation, we need to
show the form back to the user. To do this, change the <code>new</code> and <code>create</code>
actions inside <code>app/controllers/posts_controller.rb</code> to these:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def new
  @post = Post.new
end

def create
  @post = Post.new(params[:post].permit(:title, :text))

  if @post.save
    redirect_to @post 
  else
    render 'new'
  end
end

</pre>
</div>
<p>The <code>new</code> action is now creating a new instance variable called <code>@post</code>, and
you'll see why that is in just a few moments.</p><p>Notice that inside the <code>create</code> action we use <code>render</code> instead of <code>redirect_to</code> when <code>save</code>
returns <code>false</code>. The <code>render</code> method is used so that the <code>@post</code> object is passed back to the <code>new</code> template when it is rendered. This rendering is done within the same request as the form submission, whereas the <code>redirect_to</code> will tell the browser to issue another request.</p><p>If you reload
<a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> and
try to save a post without a title, Rails will send you back to the
form, but that's not very useful. You need to tell the user that
something went wrong. To do that, you'll modify
<code>app/views/posts/new.html.erb</code> to check for error messages:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for :post, url: posts_path do |f| %&gt;
  &lt;% if @post.errors.any? %&gt;
  &lt;div id="errorExplanation"&gt;
    &lt;h2&gt;&lt;%= pluralize(@post.errors.count, "error") %&gt; prohibited
      this post from being saved:&lt;/h2&gt;
    &lt;ul&gt;
    &lt;% @post.errors.full_messages.each do |msg| %&gt;
      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
    &lt;% end %&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<p>A few things are going on. We check if there are any errors with
<code>@post.errors.any?</code>, and in that case we show a list of all
errors with <code>@post.errors.full_messages</code>.</p><p><code>pluralize</code> is a rails helper that takes a number and a string as its
arguments. If the number is greater than one, the string will be automatically pluralized.</p><p>The reason why we added <code>@post = Post.new</code> in <code>posts_controller</code> is that
otherwise <code>@post</code> would be <code>nil</code> in our view, and calling
<code>@post.errors.any?</code> would throw an error.</p><div class="info"><p> Rails automatically wraps fields that contain an error with a div
with class <code>field_with_errors</code>. You can define a css rule to make them
standout.</p></div><p>Now you'll get a nice error message when saving a post without title when you
attempt to do just that on the new post form <a href="http://localhost:3000/posts/new">(http://localhost:3000/posts/new)</a>.</p><p><img src="images/getting_started/form_with_errors.png" alt="Form With Errors"></p><h4 id="updating-posts">5.12 Updating Posts</h4><p>We've covered the "CR" part of CRUD. Now let's focus on the "U" part, updating posts.</p><p>The first step we'll take is adding an <code>edit</code> action to <code>posts_controller</code>.</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def edit
  @post = Post.find(params[:id])
end

</pre>
</div>
<p>The view will contain a form similar to the one we used when creating
new posts. Create a file called <code>app/views/posts/edit.html.erb</code> and make
it look as follows:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;Editing post&lt;/h1&gt;

&lt;%= form_for :post, url: post_path(@post.id) },
method: :patch do |f| %&gt;
  &lt;% if @post.errors.any? %&gt;
  &lt;div id="errorExplanation"&gt;
    &lt;h2&gt;&lt;%= pluralize(@post.errors.count, "error") %&gt; prohibited
      this post from being saved:&lt;/h2&gt;
    &lt;ul&gt;
    &lt;% @post.errors.full_messages.each do |msg| %&gt;
      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
    &lt;% end %&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<p>This time we point the form to the <code>update</code> action, which is not defined yet
but will be very soon.</p><p>The <code>method: :patch</code> option tells Rails that we want this form to be submitted
via the <code>PATCH</code> HTTP method which is the HTTP method you're expected to use to
<strong>update</strong> resources according to the REST protocol.</p><div class="info"><p> By default forms built with the <em>form_for</em> helper are sent via <code>POST</code>.</p></div><p>Next we need to create the <code>update</code> action in <code>app/controllers/posts_controller.rb</code>:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def update
  @post = Post.find(params[:id])

  if @post.update(params[:post].permit(:title, :text))
    redirect_to @post
  else
    render 'edit'
  end
end

</pre>
</div>
<p>The new method, <code>update</code>, is used when you want to update a record
that already exists, and it accepts a hash containing the attributes
that you want to update. As before, if there was an error updating the
post we want to show the form back to the user.</p><div class="info"><p> You don't need to pass all attributes to <code>update</code>. For
example, if you'd call <code>@post.update(title: 'A new title')</code>
Rails would only update the <code>title</code> attribute, leaving all other
attributes untouched.</p></div><p>Finally, we want to show a link to the <code>edit</code> action in the list of all the
posts, so let's add that now to <code>app/views/posts/index.html.erb</code> to make it
appear next to the "Show" link:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
    &lt;th&gt;&lt;/th&gt;
    &lt;th&gt;&lt;/th&gt;
  &lt;/tr&gt;

&lt;% @posts.each do |post| %&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;%= post.title %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= post.text %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= link_to 'Show', post_path %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= link_to 'Edit', edit_post_path(post) %&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
&lt;/table&gt;

</pre>
</div>
<p>And we'll also add one to the <code>app/views/posts/show.html.erb</code> template as well,
so that there's also an "Edit" link on a post's page. Add this at the bottom of
the template:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
...

&lt;%= link_to 'Back', posts_path %&gt;
| &lt;%= link_to 'Edit', edit_post_path(@post) %&gt;

</pre>
</div>
<p>And here's how our app looks so far:</p><p><img src="images/getting_started/index_action_with_edit_link.png" alt="Index action with edit link"></p><h4 id="using-partials-to-clean-up-duplication-in-views">5.13 Using partials to clean up duplication in views</h4><p>Our <code>edit</code> page looks very similar to the <code>new</code> page, in fact they
both share the same code for displaying the form. Let's remove some duplication
by using a view partial. By convention, partial files are prefixed by an
underscore.</p><div class="info"><p> You can read more about partials in the
<a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a> guide.</p></div><p>Create a new file <code>app/views/posts/_form.html.erb</code> with the following
content:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for @post do |f| %&gt;
  &lt;% if @post.errors.any? %&gt;
  &lt;div id="errorExplanation"&gt;
    &lt;h2&gt;&lt;%= pluralize(@post.errors.count, "error") %&gt; prohibited
      this post from being saved:&lt;/h2&gt;
    &lt;ul&gt;
    &lt;% @post.errors.full_messages.each do |msg| %&gt;
      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
    &lt;% end %&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;% end %&gt;
  &lt;p&gt;
    &lt;%= f.label :title %&gt;&lt;br&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.label :text %&gt;&lt;br&gt;
    &lt;%= f.text_area :text %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

</pre>
</div>
<p>Everything except for the <code>form_for</code> declaration remained the same.
How <code>form_for</code> can figure out the right <code>action</code> and <code>method</code> attributes
when building the form will be explained in just a moment. For now, let's update the
<code>app/views/posts/new.html.erb</code> view to use this new partial, rewriting it
completely:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;New post&lt;/h1&gt;

&lt;%= render 'form' %&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<p>Then do the same for the <code>app/views/posts/edit.html.erb</code> view:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;Edit post&lt;/h1&gt;

&lt;%= render 'form' %&gt;

&lt;%= link_to 'Back', posts_path %&gt;

</pre>
</div>
<h4 id="deleting-posts">5.14 Deleting Posts</h4><p>We're now ready to cover the "D" part of CRUD, deleting posts from the
database. Following the REST convention, the route for
deleting posts in the <code>config/routes.rb</code> is:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
DELETE /posts/:id(.:format)      posts#destroy

</pre>
</div>
<p>The <code>delete</code> routing method should be used for routes that destroy
resources. If this was left as a typical <code>get</code> route, it could be possible for
people to craft malicious URLs like this:</p><div class="code_container">
<pre class="brush: xml; gutter: false; toolbar: false">
&lt;a href='http://example.com/posts/1/destroy'&gt;look at this cat!&lt;/a&gt;

</pre>
</div>
<p>We use the <code>delete</code> method for destroying resources, and this route is mapped to
the <code>destroy</code> action inside <code>app/controllers/posts_controller.rb</code>, which doesn't exist yet, but is
provided below:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def destroy
  @post = Post.find(params[:id])
  @post.destroy

  redirect_to posts_path
end

</pre>
</div>
<p>You can call <code>destroy</code> on Active Record objects when you want to delete
them from the database. Note that we don't need to add a view for this
action since we're redirecting to the <code>index</code> action.</p><p>Finally, add a 'destroy' link to your <code>index</code> action template
(<code>app/views/posts/index.html.erb</code>) to wrap everything
together.</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;h1&gt;Listing Posts&lt;/h1&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Title&lt;/th&gt;
    &lt;th&gt;Text&lt;/th&gt;
    &lt;th&gt;&lt;/th&gt;
    &lt;th&gt;&lt;/th&gt;
    &lt;th&gt;&lt;/th&gt;
  &lt;/tr&gt;

&lt;% @posts.each do |post| %&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;%= post.title %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= post.text %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= link_to 'Show', post_path %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= link_to 'Edit', edit_post_path(post) %&gt;&lt;/td&gt;
    &lt;td&gt;&lt;%= link_to 'Destroy', post_path(post),
                    method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
&lt;/table&gt;

</pre>
</div>
<p>Here we're using <code>link_to</code> in a different way. We pass the named route as the first argument, 
and then the final two keys as another argument. The <code>:method</code> and <code>:'data-confirm'</code>
options are used as HTML5 attributes so that when the link is clicked,
Rails will first show a confirm dialog to the user, and then submit the link with method <code>delete</code>.
This is done via the JavaScript file <code>jquery_ujs</code> which is automatically included
into your application's layout (<code>app/views/layouts/application.html.erb</code>) when you
generated the application. Without this file, the confirmation dialog box wouldn't appear.</p><p><img src="images/getting_started/confirm_dialog.png" alt="Confirm Dialog"></p><p>Congratulations, you can now create, show, list, update and destroy
posts. </p><div class="info"><p> In general, Rails encourages the use of resources objects in place
of declaring routes manually.
For more information about routing, see
<a href="routing.html">Rails Routing from the Outside In</a>.</p></div><h3 id="adding-a-second-model">6 Adding a Second Model</h3><p>It's time to add a second model to the application. The second model will handle comments on
posts.</p><h4 id="generating-a-model">6.1 Generating a Model</h4><p>We're going to see the same generator that we used before when creating
the <code>Post</code> model. This time we'll create a <code>Comment</code> model to hold
reference of post comments. Run this command in your terminal:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails generate model Comment commenter:string body:text post:references

</pre>
</div>
<p>This command will generate four files:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>db/migrate/20100207235629_create_comments.rb</td>
<td>Migration to create the comments table in your database (your name will include a different timestamp)</td>
</tr>
<tr>
<td>app/models/comment.rb</td>
<td>The Comment model</td>
</tr>
<tr>
<td>test/models/comment_test.rb</td>
<td>Testing harness for the comments model</td>
</tr>
<tr>
<td>test/fixtures/comments.yml</td>
<td>Sample comments for use in testing</td>
</tr>
</tbody>
</table>
<p>First, take a look at <code>app/models/comment.rb</code>:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Comment &lt; ActiveRecord::Base
  belongs_to :post
end

</pre>
</div>
<p>This is very similar to the <code>post.rb</code> model that you saw earlier. The difference
is the line <code>belongs_to :post</code>, which sets up an Active Record <em>association</em>.
You'll learn a little about associations in the next section of this guide.</p><p>In addition to the model, Rails has also made a migration to create the
corresponding database table:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class CreateComments &lt; ActiveRecord::Migration
  def change
    create_table :comments do |t|
      t.string :commenter
      t.text :body
      t.references :post

      t.timestamps
    end

    add_index :comments, :post_id
  end
end

</pre>
</div>
<p>The <code>t.references</code> line sets up a foreign key column for the association between
the two models. And the <code>add_index</code> line sets up an index for this association
column. Go ahead and run the migration:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rake db:migrate

</pre>
</div>
<p>Rails is smart enough to only execute the migrations that have not already been
run against the current database, so in this case you will just see:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
==  CreateComments: migrating =================================================
-- create_table(:comments)
   -&gt; 0.0008s
-- add_index(:comments, :post_id)
   -&gt; 0.0003s
==  CreateComments: migrated (0.0012s) ========================================

</pre>
</div>
<h4 id="associating-models">6.2 Associating Models</h4><p>Active Record associations let you easily declare the relationship between two
models. In the case of comments and posts, you could write out the relationships
this way:</p>
<ul>
<li>Each comment belongs to one post.</li>
<li>One post can have many comments.</li>
</ul>
<p>In fact, this is very close to the syntax that Rails uses to declare this
association. You've already seen the line of code inside the <code>Comment</code> model (app/models/comment.rb) that
makes each comment belong to a Post:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Comment &lt; ActiveRecord::Base
  belongs_to :post
end

</pre>
</div>
<p>You'll need to edit <code>app/models/post.rb</code> to add the other side of the association:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Post &lt; ActiveRecord::Base
  has_many :comments
  validates :title, presence: true,
                    length: { minimum: 5 }
  [...]
end

</pre>
</div>
<p>These two declarations enable a good bit of automatic behavior. For example, if
you have an instance variable <code>@post</code> containing a post, you can retrieve all
the comments belonging to that post as an array using <code>@post.comments</code>.</p><div class="info"><p> For more information on Active Record associations, see the <a href="association_basics.html">Active Record
Associations</a> guide.</p></div><h4 id="adding-a-route-for-comments">6.3 Adding a Route for Comments</h4><p>As with the <code>welcome</code> controller, we will need to add a route so that Rails knows
where we would like to navigate to see <code>comments</code>. Open up the
<code>config/routes.rb</code> file again, and edit it as follows:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
resources :posts do
  resources :comments
end

</pre>
</div>
<p>This creates <code>comments</code> as a <em>nested resource</em> within <code>posts</code>. This is another
part of capturing the hierarchical relationship that exists between posts and
comments.</p><div class="info"><p> For more information on routing, see the <a href="routing.html">Rails Routing</a> guide.</p></div><h4 id="generating-a-controller">6.4 Generating a Controller</h4><p>With the model in hand, you can turn your attention to creating a matching
controller. Again, we'll use the same generator we used before:</p><div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ rails generate controller Comments

</pre>
</div>
<p>This creates six files and one empty directory:</p>
<table>
<thead>
<tr>
<th>File/Directory</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/controllers/comments_controller.rb</td>
<td>The Comments controller</td>
</tr>
<tr>
<td>app/views/comments/</td>
<td>Views of the controller are stored here</td>
</tr>
<tr>
<td>test/controllers/comments_controller_test.rb</td>
<td>The test for the controller</td>
</tr>
<tr>
<td>app/helpers/comments_helper.rb</td>
<td>A view helper file</td>
</tr>
<tr>
<td>test/helpers/comments_helper_test.rb</td>
<td>The test for the helper</td>
</tr>
<tr>
<td>app/assets/javascripts/comment.js.coffee</td>
<td>CoffeeScript for the controller</td>
</tr>
<tr>
<td>app/assets/stylesheets/comment.css.scss</td>
<td>Cascading style sheet for the controller</td>
</tr>
</tbody>
</table>
<p>Like with any blog, our readers will create their comments directly after
reading the post, and once they have added their comment, will be sent back to
the post show page to see their comment now listed. Due to this, our
<code>CommentsController</code> is there to provide a method to create comments and delete
spam comments when they arrive.</p><p>So first, we'll wire up the Post show template
(<code>app/views/posts/show.html.erb</code>) to let us make a new comment:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br /&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br /&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;%= link_to 'Edit Post', edit_post_path(@post) %&gt; |
&lt;%= link_to 'Back to Posts', posts_path %&gt;

</pre>
</div>
<p>This adds a form on the <code>Post</code> show page that creates a new comment by
calling the <code>CommentsController</code> <code>create</code> action. The <code>form_for</code> call here uses
an array, which will build a nested route, such as <code>/posts/1/comments</code>.</p><p>Let's wire up the <code>create</code> in <code>app/controllers/comments_controller.rb</code>:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class CommentsController &lt; ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment].permit(:commenter, :body))
    redirect_to post_path(@post)
  end
end

</pre>
</div>
<p>You'll see a bit more complexity here than you did in the controller for posts.
That's a side-effect of the nesting that you've set up. Each request for a
comment has to keep track of the post to which the comment is attached, thus the
initial call to the <code>find</code> method of the <code>Post</code> model to get the post in question.</p><p>In addition, the code takes advantage of some of the methods available for an
association. We use the <code>create</code> method on <code>@post.comments</code> to create and save
the comment. This will automatically link the comment so that it belongs to that
particular post.</p><p>Once we have made the new comment, we send the user back to the original post
using the <code>post_path(@post)</code> helper. As we have already seen, this calls the
<code>show</code> action of the <code>PostsController</code> which in turn renders the <code>show.html.erb</code>
template. This is where we want the comment to show, so let's add that to the
<code>app/views/posts/show.html.erb</code>.</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

&lt;h2&gt;Comments&lt;/h2&gt;
&lt;% @post.comments.each do |comment| %&gt;
  &lt;p&gt;
    &lt;strong&gt;Commenter:&lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;strong&gt;Comment:&lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br /&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br /&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;%= link_to 'Edit Post', edit_post_path(@post) %&gt; |
&lt;%= link_to 'Back to Posts', posts_path %&gt;

</pre>
</div>
<p>Now you can add posts and comments to your blog and have them show up in the
right places.</p><p><img src="images/getting_started/post_with_comments.png" alt="Post with Comments"></p><h3 id="refactoring">7 Refactoring</h3><p>Now that we have posts and comments working, take a look at the
<code>app/views/posts/show.html.erb</code> template. It is getting long and awkward. We can
use partials to clean it up.</p><h4 id="rendering-partial-collections">7.1 Rendering Partial Collections</h4><p>First, we will make a comment partial to extract showing all the comments for the
post. Create the file <code>app/views/comments/_comment.html.erb</code> and put the
following into it:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Commenter:&lt;/strong&gt;
  &lt;%= comment.commenter %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Comment:&lt;/strong&gt;
  &lt;%= comment.body %&gt;
&lt;/p&gt;

</pre>
</div>
<p>Then you can change <code>app/views/posts/show.html.erb</code> to look like the
following:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

&lt;h2&gt;Comments&lt;/h2&gt;
&lt;%= render @post.comments %&gt;

&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br /&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br /&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

&lt;%= link_to 'Edit Post', edit_post_path(@post) %&gt; |
&lt;%= link_to 'Back to Posts', posts_path %&gt;

</pre>
</div>
<p>This will now render the partial in <code>app/views/comments/_comment.html.erb</code> once
for each comment that is in the <code>@post.comments</code> collection. As the <code>render</code>
method iterates over the <code>@post.comments</code> collection, it assigns each
comment to a local variable named the same as the partial, in this case
<code>comment</code> which is then available in the partial for us to show.</p><h4 id="rendering-a-partial-form">7.2 Rendering a Partial Form</h4><p>Let us also move that new comment section out to its own partial. Again, you
create a file <code>app/views/comments/_form.html.erb</code> containing:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;%= form_for([@post, @post.comments.build]) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :commenter %&gt;&lt;br /&gt;
    &lt;%= f.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.label :body %&gt;&lt;br /&gt;
    &lt;%= f.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;

</pre>
</div>
<p>Then you make the <code>app/views/posts/show.html.erb</code> look like the following:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Title:&lt;/strong&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Text:&lt;/strong&gt;
  &lt;%= @post.text %&gt;
&lt;/p&gt;

&lt;h2&gt;Comments&lt;/h2&gt;
&lt;%= render @post.comments %&gt;

&lt;h2&gt;Add a comment:&lt;/h2&gt;
&lt;%= render "comments/form" %&gt;

&lt;%= link_to 'Edit Post', edit_post_path(@post) %&gt; |
&lt;%= link_to 'Back to Posts', posts_path %&gt;

</pre>
</div>
<p>The second render just defines the partial template we want to render,
<code>comments/form</code>. Rails is smart enough to spot the forward slash in that
string and realize that you want to render the <code>_form.html.erb</code> file in
the <code>app/views/comments</code> directory.</p><p>The <code>@post</code> object is available to any partials rendered in the view because we
defined it as an instance variable.</p><h3 id="deleting-comments">8 Deleting Comments</h3><p>Another important feature of a blog is being able to delete spam comments. To do
this, we need to implement a link of some sort in the view and a <code>DELETE</code> action
in the <code>CommentsController</code>.</p><p>So first, let's add the delete link in the
<code>app/views/comments/_comment.html.erb</code> partial:</p><div class="code_container">
<pre class="brush: ruby; html-script: true; gutter: false; toolbar: false">
&lt;p&gt;
  &lt;strong&gt;Commenter:&lt;/strong&gt;
  &lt;%= comment.commenter %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;strong&gt;Comment:&lt;/strong&gt;
  &lt;%= comment.body %&gt;
&lt;/p&gt;

&lt;p&gt;
  &lt;%= link_to 'Destroy Comment', [comment.post, comment],
               method: :delete,
               data: { confirm: 'Are you sure?' } %&gt;
&lt;/p&gt;

</pre>
</div>
<p>Clicking this new "Destroy Comment" link will fire off a <code>DELETE
/posts/:post_id/comments/:id</code> to our <code>CommentsController</code>, which can then use
this to find the comment we want to delete, so let's add a destroy action to our
controller (<code>app/controllers/comments_controller.rb</code>):</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class CommentsController &lt; ApplicationController

  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])
    redirect_to post_path(@post)
  end

  def destroy
    @post = Post.find(params[:post_id])
    @comment = @post.comments.find(params[:id])
    @comment.destroy
    redirect_to post_path(@post)
  end

end

</pre>
</div>
<p>The <code>destroy</code> action will find the post we are looking at, locate the comment
within the <code>@post.comments</code> collection, and then remove it from the
database and send us back to the show action for the post.</p><h4 id="deleting-associated-objects">8.1 Deleting Associated Objects</h4><p>If you delete a post then its associated comments will also need to be deleted.
Otherwise they would simply occupy space in the database. Rails allows you to
use the <code>dependent</code> option of an association to achieve this. Modify the Post
model, <code>app/models/post.rb</code>, as follows:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class Post &lt; ActiveRecord::Base
  has_many :comments, dependent: :destroy
  validates :title, presence: true,
                    length: { minimum: 5 }
  [...]
end

</pre>
</div>
<h3 id="security">9 Security</h3><p>If you were to publish your blog online, anybody would be able to add, edit and
delete posts or delete comments.</p><p>Rails provides a very simple HTTP authentication system that will work nicely in
this situation.</p><p>In the <code>PostsController</code> we need to have a way to block access to the various
actions if the person is not authenticated, here we can use the Rails
<code>http_basic_authenticate_with</code> method, allowing access to the requested
action if that method allows it.</p><p>To use the authentication system, we specify it at the top of our
<code>PostsController</code>, in this case, we want the user to be authenticated on every
action, except for <code>index</code> and <code>show</code>, so we write that in <code>app/controllers/posts_controller.rb</code>:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class PostsController &lt; ApplicationController

  http_basic_authenticate_with name: "dhh", password: "secret", except: [:index, :show]

  def index
    @posts = Post.all
  end

  # snipped for brevity

</pre>
</div>
<p>We also only want to allow authenticated users to delete comments, so in the
<code>CommentsController</code> (<code>app/controllers/comments_controller.rb</code>) we write:</p><div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
class CommentsController &lt; ApplicationController

  http_basic_authenticate_with name: "dhh", password: "secret", only: :destroy

  def create
    @post = Post.find(params[:post_id])
    ...
  end
  # snipped for brevity

</pre>
</div>
<p>Now if you try to create a new post, you will be greeted with a basic HTTP
Authentication challenge</p><p><img src="images/getting_started/challenge.png" alt="Basic HTTP Authentication Challenge"></p><h3 id="what-s-next-questionmark">10 What's Next?</h3><p>Now that you've seen your first Rails application, you should feel free to
update it and experiment on your own. But you don't have to do everything
without help. As you need assistance getting up and running with Rails, feel
free to consult these support resources:</p>
<ul>
<li>The <a href="index.html">Ruby on Rails guides</a>
</li>
<li>The <a href="http://railstutorial.org/book">Ruby on Rails Tutorial</a>
</li>
<li>The <a href="http://groups.google.com/group/rubyonrails-talk">Ruby on Rails mailing list</a>
</li>
<li>The <a href="irc://irc.freenode.net/#rubyonrails">#rubyonrails</a> channel on irc.freenode.net</li>
</ul>
<p>Rails also comes with built-in help that you can generate using the rake command-line utility:</p>
<ul>
<li>Running <code>rake doc:guides</code> will put a full copy of the Rails Guides in the <code>doc/guides</code> folder of your application. Open <code>doc/guides/index.html</code> in your web browser to explore the Guides.</li>
<li>Running <code>rake doc:rails</code> will put a full copy of the API documentation for Rails in the <code>doc/api</code> folder of your application. Open <code>doc/api/index.html</code> in your web browser to explore the API documentation.</li>
</ul>
<div class="info"><p> To be able to generate the Rails Guides locally with the <code>doc:guides</code> rake task you need to install the RedCloth gem. Add it to your <code>Gemfile</code> and run <code>bundle install</code> and you're ready to go.</p></div><h3 id="configuration-gotchas">11 Configuration Gotchas</h3><p>The easiest way to work with Rails is to store all external data as UTF-8. If
you don't, Ruby libraries and Rails will often be able to convert your native
data into UTF-8, but this doesn't always work reliably, so you're better off
ensuring that all external data is UTF-8.</p><p>If you have made a mistake in this area, the most common symptom is a black
diamond with a question mark inside appearing in the browser. Another common
symptom is characters like "Ã¼" appearing instead of "ü". Rails takes a number
of internal steps to mitigate common causes of these problems that can be
automatically detected and corrected. However, if you have external data that is
not stored as UTF-8, it can occasionally result in these kinds of issues that
cannot be automatically detected by Rails and corrected.</p><p>Two very common sources of data that are not UTF-8:</p>
<ul>
<li>Your text editor: Most text editors (such as TextMate), default to saving files as
UTF-8. If your text editor does not, this can result in special characters that you
enter in your templates (such as é) to appear as a diamond with a question mark inside
in the browser. This also applies to your i18n translation files.
Most editors that do not already default to UTF-8 (such as some versions of
Dreamweaver) offer a way to change the default to UTF-8. Do so.</li>
<li>Your database. Rails defaults to converting data from your database into UTF-8 at
the boundary. However, if your database is not using UTF-8 internally, it may not
be able to store all characters that your users enter. For instance, if your database
is using Latin-1 internally, and your user enters a Russian, Hebrew, or Japanese
character, the data will be lost forever once it enters the database. If possible,
use UTF-8 as the internal storage of your database.</li>
</ul>


        <h3>피드백</h3>
        <p>
          이 가이드의 질을 향상시키기 위한 도움을 기다리고 있습니다.
        </p>
        <p>
          수정이 필요한 오타나 에러를 발견하면 <a href="https://github.com/lifo/docrails">docrails</a>을 클론한 후 직접 변경내용을 push하시기 바랍니다. 레일스의 해당 브랜치는 누구나가 write 권한이 있습니다. 커밋한 내용에 대해서는 검토작업이 이루어질 것이지만 변경내용을 서밋한 이후에 진행됩니다. <a href="https://github.com/lifo/docrails">docrails</a>은 정기적으로 master 브랜치와 클로스 머지됩니다. 
        </p>
        <p>
          미완성된 내용이나 업데이트되지 않은 내용이 있을 수 있습니다. 누락된 문서를 추가해 주시기 바랍니다. 문서작성시 참고해야할 스타일과 규칙은 <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>를 확인하시기 바랍니다. 
        </p>
        <p>
          어떤 이유에서든지, 수정이 필요한 부분을 직접 변경할 수 없는 경우에는 <a href="https://github.com/rails/rails/issues">open an issue</a>로 접속하여 문제점을 제출해 주시기 바랍니다. 
        </p>
        <p>
          마지막으로, 루비온레일스 문서화에 관련된 논의가 필요한 사항은 <a href="http://groups.google.com/group/rubyonrails-docs">rubyonrails-docs mailing list</a>에서 해 주시기 바랍니다. 
        </p>
        <h3>문서생성일</h3>
        <p>최종 생성일 : 2015-01-26 09:09:20 +0900 </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>이 작업은 <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0</a> License 특허권을 가지고 있습니다.</p>
<p>"Rails", "Ruby on Rails", 그리고 레일스 로고는 David Heinemeier Hansson의 등록상표이며, 저작권 보호를 받고 있습니다.</p>


    </div>
  </div>

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/responsive-tables.js"></script>
  <script type="text/javascript" src="javascripts/guides.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shCore.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushRuby.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushXml.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushSql.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushPlain.js"></script>
  <script type="text/javascript">
    SyntaxHighlighter.all()
    $(guidesIndex.bind);
  </script>
</body>
</html>
